--[[
    ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
    ‚ïë                    BRANZZ HUB PvP v1.1                       ‚ïë
    ‚ïë                  Script by: BranzzDev                        ‚ïë
    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
]]

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local StarterGui = game:GetService("StarterGui")
local ContextActionService = game:GetService("ContextActionService")

local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()
local Camera = Workspace.CurrentCamera

-- Configura√ß√µes
local Config = {
    SpeedBoostValue = 49,
    TPForwardDistance = 17,
    InstantTPHeight = 100,
    InstantTPSpeed = 0.1,
    FakePingUpdateRate = 0.1,
    HitboxMaxSize = 250,
    HitboxTransparency = 0.7,
    HitboxColor = Color3.fromRGB(255, 255, 255),
    UI = {
        PrimaryColor = Color3.fromRGB(25, 25, 35),
        SecondaryColor = Color3.fromRGB(35, 35, 50),
        AccentColor = Color3.fromRGB(147, 112, 219),
        TextColor = Color3.fromRGB(255, 255, 255),
        TitleBarColor = Color3.fromRGB(20, 20, 30),
        ButtonColor = Color3.fromRGB(45, 45, 65),
        ButtonHover = Color3.fromRGB(60, 60, 85),
        SuccessColor = Color3.fromRGB(100, 255, 100),
        ErrorColor = Color3.fromRGB(255, 100, 100),
        WarningColor = Color3.fromRGB(255, 200, 100)
    }
}

-- Vari√°veis de Estado
local State = {
    MarkedPosition = nil,
    IsMinimized = false,
    SpeedBoostActive = false,
    FakePingActive = false,
    HitboxActive = false,
    HitboxSize = 50,
    IsDragging = false,
    DragStart = nil,
    StartPos = nil,
    InstantTPRunning = false,
    TPCountdownRunning = false,
    FakePingClone = nil,
    FakePingConnection = nil,
    FakeCharacter = nil,
    RealCharacter = nil,
    OriginalCameraSubject = nil,
    HitboxConnections = {},
    ExpandedHitboxes = {}
}

-- Criar GUI Principal
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "BranzzHubPvP"
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- Frame Principal
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 350, 0, 450)
MainFrame.Position = UDim2.new(0.5, -175, 0.5, -225)
MainFrame.BackgroundColor3 = Config.UI.PrimaryColor
MainFrame.BorderSizePixel = 0
MainFrame.ClipsDescendants = true
MainFrame.Parent = ScreenGui

-- Cantos arredondados
local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 12)
UICorner.Parent = MainFrame

-- Sombra
local Shadow = Instance.new("ImageLabel")
Shadow.Name = "Shadow"
Shadow.AnchorPoint = Vector2.new(0.5, 0.5)
Shadow.BackgroundTransparency = 1
Shadow.Position = UDim2.new(0.5, 0, 0.5, 0)
Shadow.Size = UDim2.new(1, 40, 1, 40)
Shadow.ZIndex = -1
Shadow.Image = "rbxassetid://5554236805"
Shadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
Shadow.ImageTransparency = 0.6
Shadow.ScaleType = Enum.ScaleType.Slice
Shadow.SliceCenter = Rect.new(23, 23, 277, 277)
Shadow.Parent = MainFrame

-- Barra de T√≠tulo
local TitleBar = Instance.new("Frame")
TitleBar.Name = "TitleBar"
TitleBar.Size = UDim2.new(1, 0, 0, 45)
TitleBar.BackgroundColor3 = Config.UI.TitleBarColor
TitleBar.BorderSizePixel = 0
TitleBar.Parent = MainFrame

local TitleCorner = Instance.new("UICorner")
TitleCorner.CornerRadius = UDim.new(0, 12)
TitleCorner.Parent = TitleBar

-- Gradiente na barra de t√≠tulo
local TitleGradient = Instance.new("UIGradient")
TitleGradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Config.UI.TitleBarColor),
    ColorSequenceKeypoint.new(1, Config.UI.SecondaryColor)
})
TitleGradient.Rotation = 90
TitleGradient.Parent = TitleBar

-- T√≠tulo
local TitleLabel = Instance.new("TextLabel")
TitleLabel.Name = "Title"
TitleLabel.Size = UDim2.new(0.5, 0, 1, 0)
TitleLabel.Position = UDim2.new(0, 15, 0, 0)
TitleLabel.BackgroundTransparency = 1
TitleLabel.Text = "branzz hub PvP"
TitleLabel.TextColor3 = Config.UI.AccentColor
TitleLabel.TextSize = 22
TitleLabel.Font = Enum.Font.GothamBold
TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
TitleLabel.Parent = TitleBar

-- Bot√µes da Barra de T√≠tulo
local ButtonContainer = Instance.new("Frame")
ButtonContainer.Name = "ButtonContainer"
ButtonContainer.Size = UDim2.new(0, 110, 1, 0)
ButtonContainer.Position = UDim2.new(1, -115, 0, 0)
ButtonContainer.BackgroundTransparency = 1
ButtonContainer.Parent = TitleBar

local function CreateTitleButton(name, text, color, position)
    local btn = Instance.new("TextButton")
    btn.Name = name
    btn.Size = UDim2.new(0, 30, 0, 30)
    btn.Position = UDim2.new(0, position, 0.5, -15)
    btn.BackgroundColor3 = Config.UI.ButtonColor
    btn.Text = text
    btn.TextColor3 = color
    btn.TextSize = 16
    btn.Font = Enum.Font.GothamBold
    btn.Parent = ButtonContainer
    
    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 6)
    btnCorner.Parent = btn
    
    btn.MouseEnter:Connect(function()
        TweenService:Create(btn, TweenInfo.new(0.2), {BackgroundColor3 = Config.UI.ButtonHover}):Play()
    end)
    
    btn.MouseLeave:Connect(function()
        TweenService:Create(btn, TweenInfo.new(0.2), {BackgroundColor3 = Config.UI.ButtonColor}):Play()
    end)
    
    return btn
end

local MinimizeBtn = CreateTitleButton("Minimize", "‚àí", Config.UI.TextColor, 5)
local MaximizeBtn = CreateTitleButton("Maximize", "‚ñ°", Config.UI.TextColor, 40)
local CloseBtn = CreateTitleButton("Close", "√ó", Config.UI.ErrorColor, 75)

-- Container de Conte√∫do (Scroll)
local ContentContainer = Instance.new("Frame")
ContentContainer.Name = "ContentContainer"
ContentContainer.Size = UDim2.new(1, 0, 1, -45)
ContentContainer.Position = UDim2.new(0, 0, 0, 45)
ContentContainer.BackgroundTransparency = 1
ContentContainer.Parent = MainFrame

-- ScrollingFrame
local ScrollFrame = Instance.new("ScrollingFrame")
ScrollFrame.Name = "ScrollFrame"
ScrollFrame.Size = UDim2.new(1, -20, 1, -20)
ScrollFrame.Position = UDim2.new(0, 10, 0, 10)
ScrollFrame.BackgroundTransparency = 1
ScrollFrame.BorderSizePixel = 0
ScrollFrame.ScrollBarThickness = 6
ScrollFrame.ScrollBarImageColor3 = Config.UI.AccentColor
ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
ScrollFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y
ScrollFrame.Parent = ContentContainer

-- Layout
local UIListLayout = Instance.new("UIListLayout")
UIListLayout.Padding = UDim.new(0, 10)
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout.Parent = ScrollFrame

-- Padding
local UIPadding = Instance.new("UIPadding")
UIPadding.PaddingTop = UDim.new(0, 5)
UIPadding.PaddingBottom = UDim.new(0, 5)
UIPadding.Parent = ScrollFrame

-- Sistema de Notifica√ß√µes
local NotificationFrame = Instance.new("Frame")
NotificationFrame.Name = "NotificationFrame"
NotificationFrame.Size = UDim2.new(0, 280, 0, 60)
NotificationFrame.Position = UDim2.new(0.5, -140, 0, -70)
NotificationFrame.BackgroundColor3 = Config.UI.SecondaryColor
NotificationFrame.BorderSizePixel = 0
NotificationFrame.Visible = false
NotificationFrame.Parent = ScreenGui

local NotifCorner = Instance.new("UICorner")
NotifCorner.CornerRadius = UDim.new(0, 10)
NotifCorner.Parent = NotificationFrame

local NotifText = Instance.new("TextLabel")
NotifText.Name = "Text"
NotifText.Size = UDim2.new(1, -20, 1, 0)
NotifText.Position = UDim2.new(0, 10, 0, 0)
NotifText.BackgroundTransparency = 1
NotifText.Text = ""
NotifText.TextColor3 = Config.UI.TextColor
NotifText.TextSize = 14
NotifText.Font = Enum.Font.Gotham
NotifText.TextWrapped = true
NotifText.Parent = NotificationFrame

-- Fun√ß√£o de Notifica√ß√£o
local function ShowNotification(text, color)
    NotifText.Text = text
    NotifText.TextColor3 = color or Config.UI.TextColor
    NotificationFrame.Visible = true
    
    TweenService:Create(NotificationFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {
        Position = UDim2.new(0.5, -140, 0, 20)
    }):Play()
    
    task.delay(3, function()
        TweenService:Create(NotificationFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {
            Position = UDim2.new(0.5, -140, 0, -70)
        }):Play()
        task.wait(0.3)
        NotificationFrame.Visible = false
    end)
end

-- Fun√ß√£o para criar bot√µes
local function CreateButton(parent, text, icon, callback)
    local btnFrame = Instance.new("Frame")
    btnFrame.Size = UDim2.new(1, -10, 0, 45)
    btnFrame.BackgroundColor3 = Config.UI.ButtonColor
    btnFrame.BorderSizePixel = 0
    btnFrame.Parent = parent
    
    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 8)
    btnCorner.Parent = btnFrame
    
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, 0, 1, 0)
    btn.BackgroundTransparency = 1
    btn.Text = icon .. " " .. text
    btn.TextColor3 = Config.UI.TextColor
    btn.TextSize = 14
    btn.Font = Enum.Font.GothamSemibold
    btn.Parent = btnFrame
    
    btn.MouseEnter:Connect(function()
        TweenService:Create(btnFrame, TweenInfo.new(0.2), {BackgroundColor3 = Config.UI.ButtonHover}):Play()
    end)
    
    btn.MouseLeave:Connect(function()
        TweenService:Create(btnFrame, TweenInfo.new(0.2), {BackgroundColor3 = Config.UI.ButtonColor}):Play()
    end)
    
    btn.MouseButton1Click:Connect(callback)
    
    return btnFrame
end

-- Fun√ß√£o para criar Toggle com Checkbox
local function CreateToggle(parent, text, icon, callback)
    local toggleFrame = Instance.new("Frame")
    toggleFrame.Size = UDim2.new(1, -10, 0, 45)
    toggleFrame.BackgroundColor3 = Config.UI.ButtonColor
    toggleFrame.BorderSizePixel = 0
    toggleFrame.Parent = parent
    
    local toggleCorner = Instance.new("UICorner")
    toggleCorner.CornerRadius = UDim.new(0, 8)
    toggleCorner.Parent = toggleFrame
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -60, 1, 0)
    label.Position = UDim2.new(0, 15, 0, 0)
    label.BackgroundTransparency = 1
    label.Text = icon .. " " .. text
    label.TextColor3 = Config.UI.TextColor
    label.TextSize = 14
    label.Font = Enum.Font.GothamSemibold
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = toggleFrame
    
    local checkbox = Instance.new("Frame")
    checkbox.Name = "Checkbox"
    checkbox.Size = UDim2.new(0, 24, 0, 24)
    checkbox.Position = UDim2.new(1, -40, 0.5, -12)
    checkbox.BackgroundColor3 = Config.UI.SecondaryColor
    checkbox.BorderSizePixel = 0
    checkbox.Parent = toggleFrame
    
    local checkCorner = Instance.new("UICorner")
    checkCorner.CornerRadius = UDim.new(0, 4)
    checkCorner.Parent = checkbox
    
    local checkmark = Instance.new("TextLabel")
    checkmark.Name = "Checkmark"
    checkmark.Size = UDim2.new(1, 0, 1, 0)
    checkmark.BackgroundTransparency = 1
    checkmark.Text = "‚úì"
    checkmark.TextColor3 = Config.UI.SuccessColor
    checkmark.TextSize = 18
    checkmark.Font = Enum.Font.GothamBold
    checkmark.Visible = false
    checkmark.Parent = checkbox
    
    local isActive = false
    
    local function UpdateState()
        isActive = not isActive
        checkmark.Visible = isActive
        if isActive then
            TweenService:Create(checkbox, TweenInfo.new(0.2), {BackgroundColor3 = Config.UI.AccentColor}):Play()
        else
            TweenService:Create(checkbox, TweenInfo.new(0.2), {BackgroundColor3 = Config.UI.SecondaryColor}):Play()
        end
        callback(isActive)
    end
    
    local clickArea = Instance.new("TextButton")
    clickArea.Size = UDim2.new(1, 0, 1, 0)
    clickArea.BackgroundTransparency = 1
    clickArea.Text = ""
    clickArea.Parent = toggleFrame
    
    clickArea.MouseEnter:Connect(function()
        TweenService:Create(toggleFrame, TweenInfo.new(0.2), {BackgroundColor3 = Config.UI.ButtonHover}):Play()
    end)
    
    clickArea.MouseLeave:Connect(function()
        TweenService:Create(toggleFrame, TweenInfo.new(0.2), {BackgroundColor3 = Config.UI.ButtonColor}):Play()
    end)
    
    clickArea.MouseButton1Click:Connect(UpdateState)
    
    return {
        Frame = toggleFrame,
        SetState = function(state)
            isActive = state
            checkmark.Visible = state
            checkbox.BackgroundColor3 = state and Config.UI.AccentColor or Config.UI.SecondaryColor
        end,
        GetState = function() return isActive end
    }
end

-- Fun√ß√£o para criar Slider
local function CreateSlider(parent, text, icon, min, max, default, callback)
    local sliderFrame = Instance.new("Frame")
    sliderFrame.Size = UDim2.new(1, -10, 0, 80)
    sliderFrame.BackgroundColor3 = Config.UI.ButtonColor
    sliderFrame.BorderSizePixel = 0
    sliderFrame.Parent = parent
    
    local sliderCorner = Instance.new("UICorner")
    sliderCorner.CornerRadius = UDim.new(0, 8)
    sliderCorner.Parent = sliderFrame
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -20, 0, 25)
    label.Position = UDim2.new(0, 10, 0, 8)
    label.BackgroundTransparency = 1
    label.Text = icon .. " " .. text
    label.TextColor3 = Config.UI.TextColor
    label.TextSize = 14
    label.Font = Enum.Font.GothamSemibold
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = sliderFrame
    
    local valueLabel = Instance.new("TextLabel")
    valueLabel.Name = "Value"
    valueLabel.Size = UDim2.new(0, 50, 0, 25)
    valueLabel.Position = UDim2.new(1, -60, 0, 8)
    valueLabel.BackgroundTransparency = 1
    valueLabel.Text = tostring(default)
    valueLabel.TextColor3 = Config.UI.AccentColor
    valueLabel.TextSize = 14
    valueLabel.Font = Enum.Font.GothamBold
    valueLabel.Parent = sliderFrame
    
    local track = Instance.new("Frame")
    track.Name = "Track"
    track.Size = UDim2.new(1, -30, 0, 8)
    track.Position = UDim2.new(0, 15, 0, 45)
    track.BackgroundColor3 = Config.UI.SecondaryColor
    track.BorderSizePixel = 0
    track.Parent = sliderFrame
    
    local trackCorner = Instance.new("UICorner")
    trackCorner.CornerRadius = UDim.new(0, 4)
    trackCorner.Parent = track
    
    local fill = Instance.new("Frame")
    fill.Name = "Fill"
    fill.Size = UDim2.new((default - min) / (max - min), 0, 1, 0)
    fill.BackgroundColor3 = Config.UI.AccentColor
    fill.BorderSizePixel = 0
    fill.Parent = track
    
    local fillCorner = Instance.new("UICorner")
    fillCorner.CornerRadius = UDim.new(0, 4)
    fillCorner.Parent = fill
    
    local knob = Instance.new("Frame")
    knob.Name = "Knob"
    knob.Size = UDim2.new(0, 18, 0, 18)
    knob.Position = UDim2.new((default - min) / (max - min), -9, 0.5, -9)
    knob.BackgroundColor3 = Config.UI.TextColor
    knob.BorderSizePixel = 0
    knob.Parent = track
    
    local knobCorner = Instance.new("UICorner")
    knobCorner.CornerRadius = UDim.new(0.5, 0)
    knobCorner.Parent = knob
    
    local isDragging = false
    
    local function UpdateSlider(input)
        local pos = math.clamp((input.Position.X - track.AbsolutePosition.X) / track.AbsoluteSize.X, 0, 1)
        local value = math.floor(min + (max - min) * pos)
        
        fill.Size = UDim2.new(pos, 0, 1, 0)
        knob.Position = UDim2.new(pos, -9, 0.5, -9)
        valueLabel.Text = tostring(value)
        
        callback(value)
        return value
    end
    
    knob.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            isDragging = true
        end
    end)
    
    track.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            isDragging = true
            UpdateSlider(input)
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if isDragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            UpdateSlider(input)
        end
    end)
    
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            isDragging = false
        end
    end)
    
    return sliderFrame
end

-- Separador
local function CreateSeparator(parent)
    local sep = Instance.new("Frame")
    sep.Size = UDim2.new(1, -20, 0, 2)
    sep.Position = UDim2.new(0, 10, 0, 0)
    sep.BackgroundColor3 = Config.UI.SecondaryColor
    sep.BorderSizePixel = 0
    sep.Parent = parent
    return sep
end

-- T√≠tulo de Se√ß√£o
local function CreateSectionTitle(parent, text)
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, -10, 0, 25)
    title.BackgroundTransparency = 1
    title.Text = text
    title.TextColor3 = Config.UI.AccentColor
    title.TextSize = 12
    title.Font = Enum.Font.GothamBold
    title.TextXAlignment = Enum.TextXAlignment.Left
    title.Parent = parent
    return title
end

-- Criar Bot√µes e Fun√ß√µes

-- Se√ß√£o: Teleporte
CreateSectionTitle(ScrollFrame, "‚ïê TELEPORTE ‚ïê")

-- Mark Position
CreateButton(ScrollFrame, "Mark Position", "üö©", function()
    if State.MarkedPosition then
        ShowNotification("‚ùå Erro: J√° existe uma posi√ß√£o marcada! Use Clear Position primeiro.", Config.UI.ErrorColor)
        return
    end
    
    local character = LocalPlayer.Character
    if not character or not character:FindFirstChild("HumanoidRootPart") then
        ShowNotification("‚ùå Erro: Personagem n√£o encontrado!", Config.UI.ErrorColor)
        return
    end
    
    State.MarkedPosition = character.HumanoidRootPart.Position
    ShowNotification("‚úÖ Posi√ß√£o marcada com sucesso!", Config.UI.SuccessColor)
end)

-- Clear Position
CreateButton(ScrollFrame, "Clear Position", "üóëÔ∏è", function()
    if not State.MarkedPosition then
        ShowNotification("‚ùå Nenhuma posi√ß√£o marcada!", Config.UI.ErrorColor)
        return
    end
    
    State.MarkedPosition = nil
    ShowNotification("‚úÖ Posi√ß√£o apagada!", Config.UI.SuccessColor)
end)

CreateSeparator(ScrollFrame)

-- Instant TP
CreateButton(ScrollFrame, "Instant TP", "‚ö°", function()
    if State.InstantTPRunning then
        ShowNotification("‚ùå Teleporte j√° est√° em andamento!", Config.UI.ErrorColor)
        return
    end
    
    if not State.MarkedPosition then
        ShowNotification("‚ùå Marque uma posi√ß√£o primeiro!", Config.UI.ErrorColor)
        return
    end
    
    local character = LocalPlayer.Character
    if not character or not character:FindFirstChild("HumanoidRootPart") then
        ShowNotification("‚ùå Personagem n√£o encontrado!", Config.UI.ErrorColor)
        return
    end
    
    State.InstantTPRunning = true
    ShowNotification("‚ö° Iniciando teleporte voador...", Config.UI.WarningColor)
    
    task.spawn(function()
        local hrp = character.HumanoidRootPart
        local targetPos = State.MarkedPosition
        local startPos = hrp.Position
        
        -- Subir
        local height = math.max(startPos.Y, targetPos.Y) + Config.InstantTPHeight
        
        -- Fun√ß√£o para empurrar jogadores
        local function PushPlayersAway()
            for _, player in ipairs(Players:GetPlayers()) do
                if player ~= LocalPlayer and player.Character then
                    local otherHRP = player.Character:FindFirstChild("HumanoidRootPart")
                    if otherHRP then
                        local distance = (hrp.Position - otherHRP.Position).Magnitude
                        if distance < 20 then
                            local pushDirection = (otherHRP.Position - hrp.Position).Unit
                            otherHRP.Velocity = pushDirection * 100 + Vector3.new(0, 50, 0)
                        end
                    end
                end
            end
        end
        
        -- Subir voando
        for i = 1, 20 do
            if not character or not character:FindFirstChild("HumanoidRootPart") then break end
            hrp.CFrame = CFrame.new(hrp.Position.X, hrp.Position.Y + (height - startPos.Y) / 20, hrp.Position.Z)
            PushPlayersAway()
            task.wait(Config.InstantTPSpeed)
        end
        
        -- Mover horizontalmente com micro teleportes
        local currentPos = hrp.Position
        local direction = (targetPos - currentPos).Unit
        local distance = (targetPos - currentPos).Magnitude
        local steps = math.floor(distance / 10)
        
        for i = 1, steps do
            if not character or not character:FindFirstChild("HumanoidRootPart") then break end
            currentPos = currentPos + direction * 10
            hrp.CFrame = CFrame.new(currentPos.X, height, currentPos.Z)
            PushPlayersAway()
            task.wait(Config.InstantTPSpeed)
        end
        
        -- Descer
        for i = 1, 20 do
            if not character or not character:FindFirstChild("HumanoidRootPart") then break end
            local newY = height - (height - targetPos.Y) * (i / 20)
            hrp.CFrame = CFrame.new(targetPos.X, newY, targetPos.Z)
            PushPlayersAway()
            task.wait(Config.InstantTPSpeed)
        end
        
        hrp.CFrame = CFrame.new(targetPos)
        State.InstantTPRunning = false
        ShowNotification("‚úÖ Teleporte conclu√≠do!", Config.UI.SuccessColor)
    end)
end)

-- TP Countdown
CreateButton(ScrollFrame, "TP Countdown (5s)", "‚è≥", function()
    if State.TPCountdownRunning then
        ShowNotification("‚ùå Contagem j√° em andamento!", Config.UI.ErrorColor)
        return
    end
    
    if not State.MarkedPosition then
        ShowNotification("‚ùå Marque uma posi√ß√£o primeiro!", Config.UI.ErrorColor)
        return
    end
    
    local character = LocalPlayer.Character
    if not character or not character:FindFirstChild("HumanoidRootPart") then
        ShowNotification("‚ùå Personagem n√£o encontrado!", Config.UI.ErrorColor)
        return
    end
    
    State.TPCountdownRunning = true
    
    task.spawn(function()
        for i = 5, 1, -1 do
            ShowNotification("‚è≥ Teleporte em " .. i .. " segundos...", Config.UI.WarningColor)
            task.wait(1)
        end
        
        local hrp = character:FindFirstChild("HumanoidRootPart")
        if hrp then
            hrp.CFrame = CFrame.new(State.MarkedPosition)
            ShowNotification("‚úÖ Teleportado com sucesso!", Config.UI.SuccessColor)
        end
        
        State.TPCountdownRunning = false
    end)
end)

-- TP Forward
CreateButton(ScrollFrame, "TP Forward (17 studs)", "üöÄ", function()
    local character = LocalPlayer.Character
    if not character or not character:FindFirstChild("HumanoidRootPart") then
        ShowNotification("‚ùå Personagem n√£o encontrado!", Config.UI.ErrorColor)
        return
    end
    
    local hrp = character.HumanoidRootPart
    local forward = hrp.CFrame.LookVector * Config.TPForwardDistance
    local newPos = hrp.Position + forward + Vector3.new(0, 5, 0)
    
    -- Anima√ß√£o de flutuar
    for i = 1, 10 do
        if not character or not character:FindFirstChild("HumanoidRootPart") then return end
        hrp.CFrame = CFrame.new(hrp.Position + forward / 10 + Vector3.new(0, 0.5, 0))
        task.wait(0.02)
    end
    
    hrp.CFrame = CFrame.new(newPos)
    ShowNotification("‚úÖ Teleportado para frente!", Config.UI.SuccessColor)
end)

CreateSeparator(ScrollFrame)

-- Se√ß√£o: Modifica√ß√µes
CreateSectionTitle(ScrollFrame, "‚ïê MODIFICA√á√ïES ‚ïê")

-- Speed Boost
local SpeedToggle = CreateToggle(ScrollFrame, "Speed Boost", "üèÅ", function(isActive)
    State.SpeedBoostActive = isActive
    
    local function ApplySpeed()
        local character = LocalPlayer.Character
        if character and character:FindFirstChild("Humanoid") then
            character.Humanoid.WalkSpeed = isActive and Config.SpeedBoostValue or 16
        end
    end
    
    ApplySpeed()
    
    -- Persistir ap√≥s respawn
    if isActive then
        LocalPlayer.CharacterAdded:Connect(function(char)
            task.wait(0.5)
            if State.SpeedBoostActive then
                local humanoid = char:WaitForChild("Humanoid")
                humanoid.WalkSpeed = Config.SpeedBoostValue
            end
        end)
    end
    
    ShowNotification(isActive and "üèÅ Speed Boost ATIVADO! (Velocidade: 49)" or "üèÅ Speed Boost DESATIVADO!", 
        isActive and Config.UI.SuccessColor or Config.UI.ErrorColor)
end)

-- FAKE PING SERVER CORRIGIDO
local FakePingToggle = CreateToggle(ScrollFrame, "Fake Ping Server", "üìµ", function(isActive)
    State.FakePingActive = isActive
    
    if isActive then
        local character = LocalPlayer.Character
        if not character or not character:FindFirstChild("HumanoidRootPart") then
            ShowNotification("‚ùå Personagem n√£o encontrado!", Config.UI.ErrorColor)
            FakePingToggle.SetState(false)
            State.FakePingActive = false
            return
        end
        
        local humanoid = character:FindFirstChild("Humanoid")
        if not humanoid then
            ShowNotification("‚ùå Humanoid n√£o encontrado!", Config.UI.ErrorColor)
            FakePingToggle.SetState(false)
            State.FakePingActive = false
            return
        end
        
        -- Salvar refer√™ncias
        State.RealCharacter = character
        State.OriginalCameraSubject = Workspace.CurrentCamera.CameraSubject
        
        -- Posi√ß√£o inicial onde o personagem "travado" vai ficar
        local startPosition = character.HumanoidRootPart.CFrame
        
        -- CRIAR O CLONE QUE OS OUTROS V√ÉO VER (fica parado dando micro teleportes)
        local fakeCharacter = Instance.new("Model")
        fakeCharacter.Name = LocalPlayer.Name
        
        -- Clonar todas as partes do personagem
        local clonedParts = {}
        for _, part in ipairs(character:GetDescendants()) do
            if part:IsA("BasePart") then
                local clone = part:Clone()
                clone.CanCollide = false
                clone.Anchored = true
                clone.Parent = fakeCharacter
                clonedParts[part.Name] = clone
            end
        end
        
        fakeCharacter.PrimaryPart = clonedParts["HumanoidRootPart"] or clonedParts["Torso"] or clonedParts["UpperTorso"]
        fakeCharacter.Parent = Workspace
        State.FakePingClone = fakeCharacter
        
        -- CRIAR PERSONAGEM FANTASMA QUE O JOGADOR VAI CONTROLAR
        local ghostCharacter = Instance.new("Model")
        ghostCharacter.Name = "Ghost_" .. LocalPlayer.Name
        
        local ghostHRP = Instance.new("Part")
        ghostHRP.Name = "HumanoidRootPart"
        ghostHRP.Size = Vector3.new(2, 2, 1)
        ghostHRP.CFrame = startPosition
        ghostHRP.CanCollide = true
        ghostHRP.Parent = ghostCharacter
        
        local ghostHumanoid = Instance.new("Humanoid")
        ghostHumanoid.WalkSpeed = humanoid.WalkSpeed
        ghostHumanoid.JumpPower = humanoid.JumpPower
        ghostHumanoid.Parent = ghostCharacter
        
        -- Adicionar partes visuais ao fantasma (s√≥ voc√™ vai ver)
        local ghostTorso = Instance.new("Part")
        ghostTorso.Name = "Torso"
        ghostTorso.Size = Vector3.new(2, 2, 1)
        ghostTorso.Position = startPosition.Position
        ghostTorso.Transparency = 0.5
        ghostTorso.Color = Color3.fromRGB(147, 112, 219)
        ghostTorso.Material = Enum.Material.ForceField
        ghostTorso.CanCollide = false
        ghostTorso.Parent = ghostCharacter
        
        local neck = Instance.new("Weld")
        neck.Part0 = ghostHRP
        neck.Part1 = ghostTorso
        neck.C0 = CFrame.new(0, 0, 0)
        neck.Parent = ghostHRP
        
        ghostCharacter.PrimaryPart = ghostHRP
        ghostCharacter.Parent = Workspace
        State.FakeCharacter = ghostCharacter
        
        -- Configurar c√¢mera para seguir o fantasma
        Workspace.CurrentCamera.CameraSubject = ghostHumanoid
        
        -- MOVER O PERSONAGEM REAL PARA LONGE (invis√≠vel para todos)
        character:MoveTo(Vector3.new(0, 10000, 0))
        
        -- Congelar o personagem real
        for _, part in ipairs(character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.Anchored = true
            end
        end
        
        -- ANIMA√á√ÉO DO FAKE (micro teleportes para frente e para tr√°s)
        local microTeleportConnection = task.spawn(function()
            local originalPos = startPosition.Position
            while State.FakePingActive and fakeCharacter and fakeCharacter.Parent do
                local offset = Vector3.new(
                    math.random(-3, 3),
                    0,
                    math.random(-3, 3)
                )
                
                for _, part in ipairs(fakeCharacter:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.CFrame = CFrame.new(originalPos + offset)
                    end
                end
                
                task.wait(0.15)
                
                -- Voltar para posi√ß√£o original
                for _, part in ipairs(fakeCharacter:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.CFrame = CFrame.new(originalPos)
                    end
                end
                
                task.wait(0.1)
            end
        end)
        
        -- Sistema de seguran√ßa - teleportar fantasma para longe se algu√©m chegar perto
        State.FakePingConnection = RunService.Heartbeat:Connect(function()
            if not State.FakePingActive then return end
            
            for _, player in ipairs(Players:GetPlayers()) do
                if player ~= LocalPlayer and player.Character then
                    local otherHRP = player.Character:FindFirstChild("HumanoidRootPart")
                    if otherHRP and ghostHRP then
                        local distance = (ghostHRP.Position - otherHRP.Position).Magnitude
                        if distance < 15 then
                            -- Teleportar para cima (seguran√ßa)
                            ghostHRP.CFrame = CFrame.new(ghostHRP.Position + Vector3.new(0, 30, 0))
                        end
                    end
                end
            end
        end)
        
        -- Sincronizar movimento do fantasma com input do jogador
        local moveConnection = RunService.RenderStepped:Connect(function()
            if not State.FakePingActive or not ghostCharacter or not ghostCharacter.Parent then return end
            
            -- Verificar se o fantasma caiu no void
            if ghostHRP.Position.Y < -100 then
                ghostHRP.CFrame = CFrame.new(startPosition.Position + Vector3.new(0, 10, 0))
            end
        end)
        
        State.MoveConnection = moveConnection
        
        ShowNotification("üìµ Fake Ping ATIVADO! Voc√™ est√° invis√≠vel globalmente.\nUse WASD para mover o fantasma!", Config.UI.SuccessColor)
        
    else
        -- DESATIVAR FAKE PING
        
        -- Restaurar c√¢mera
        if State.OriginalCameraSubject then
            Workspace.CurrentCamera.CameraSubject = State.OriginalCameraSubject
        end
        
        -- Destruir clone fake
        if State.FakePingClone then
            State.FakePingClone:Destroy()
            State.FakePingClone = nil
        end
        
        -- Destruir personagem fantasma
        if State.FakeCharacter then
            State.FakeCharacter:Destroy()
            State.FakeCharacter = nil
        end
        
        -- Desconectar conex√µes
        if State.FakePingConnection then
            State.FakePingConnection:Disconnect()
            State.FakePingConnection = nil
        end
        
        if State.MoveConnection then
            State.MoveConnection:Disconnect()
            State.MoveConnection = nil
        end
        
        -- Restaurar personagem real
        if State.RealCharacter and State.RealCharacter.Parent then
            -- Descongelar
            for _, part in ipairs(State.RealCharacter:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.Anchored = false
                end
            end
            
            -- Teleportar de volta para posi√ß√£o vis√≠vel
            local hrp = State.RealCharacter:FindFirstChild("HumanoidRootPart")
            if hrp then
                -- Teleportar para uma posi√ß√£o segura perto de onde o fantasma estava
                local ghostPos = State.FakeCharacter and State.FakeCharacter:FindFirstChild("HumanoidRootPart") 
                if ghostPos then
                    hrp.CFrame = ghostPos.CFrame
                else
                    hrp.CFrame = CFrame.new(0, 10, 0)
                end
            end
        end
        
        State.RealCharacter = nil
        State.OriginalCameraSubject = nil
        
        ShowNotification("üìµ Fake Ping DESATIVADO! Personagem restaurado.", Config.UI.ErrorColor)
    end
end)

CreateSeparator(ScrollFrame)

-- Se√ß√£o: Hitbox
CreateSectionTitle(ScrollFrame, "‚ïê HITBOX EXPANDER ‚ïê")

-- Hitbox Toggle
local HitboxToggle = CreateToggle(ScrollFrame, "Hitbox Expander", "üí†", function(isActive)
    State.HitboxActive = isActive
    
    if isActive then
        -- Expandir hitboxes
        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character then
                local character = player.Character
                for _, part in ipairs(character:GetDescendants()) do
                    if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                        if not State.ExpandedHitboxes[player] then
                            State.ExpandedHitboxes[player] = {}
                        end
                        
                        local originalSize = part.Size
                        State.ExpandedHitboxes[player][part] = originalSize
                        
                        part.Size = Vector3.new(State.HitboxSize, State.HitboxSize, State.HitboxSize)
                        part.Transparency = Config.HitboxTransparency
                        part.Color = Config.HitboxColor
                        part.Material = Enum.Material.ForceField
                        part.CanCollide = false
                    end
                end
            end
        end
        
        -- Atualizar quando novos jogadores entrarem
        local playerAddedConnection = Players.PlayerAdded:Connect(function(player)
            player.CharacterAdded:Connect(function(character)
                if State.HitboxActive then
                    task.wait(1)
                    for _, part in ipairs(character:GetDescendants()) do
                        if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                            if not State.ExpandedHitboxes[player] then
                                State.ExpandedHitboxes[player] = {}
                            end
                            
                            State.ExpandedHitboxes[player][part] = part.Size
                            part.Size = Vector3.new(State.HitboxSize, State.HitboxSize, State.HitboxSize)
                            part.Transparency = Config.HitboxTransparency
                            part.Color = Config.HitboxColor
                            part.Material = Enum.Material.ForceField
                            part.CanCollide = false
                        end
                    end
                end
            end)
        end)
        
        table.insert(State.HitboxConnections, playerAddedConnection)
        
        ShowNotification("üí† Hitbox Expander ATIVADO! Tamanho: " .. State.HitboxSize, Config.UI.SuccessColor)
    else
        -- Restaurar hitboxes
        for player, parts in pairs(State.ExpandedHitboxes) do
            for part, originalSize in pairs(parts) do
                if part and part.Parent then
                    part.Size = originalSize
                    part.Transparency = 0
                    part.Material = Enum.Material.Plastic
                end
            end
        end
        
        State.ExpandedHitboxes = {}
        
        -- Desconectar conex√µes
        for _, connection in ipairs(State.HitboxConnections) do
            connection:Disconnect()
        end
        State.HitboxConnections = {}
        
        ShowNotification("üí† Hitbox Expander DESATIVADO!", Config.UI.ErrorColor)
    end
end)

-- Hitbox Slider
CreateSlider(ScrollFrame, "Hitbox Size", "", 10, Config.HitboxMaxSize, 50, function(value)
    State.HitboxSize = value
    
    -- Atualizar hitboxes se estiver ativo
    if State.HitboxActive then
        for player, parts in pairs(State.ExpandedHitboxes) do
            for part, _ in pairs(parts) do
                if part and part.Parent then
                    part.Size = Vector3.new(value, value, value)
                end
            end
        end
    end
end)

-- Sistema de Arrastar
TitleBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        State.IsDragging = true
        State.DragStart = input.Position
        State.StartPos = MainFrame.Position
    end
end)

TitleBar.InputChanged:Connect(function(input)
    if State.IsDragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
        local delta = input.Position - State.DragStart
        MainFrame.Position = UDim2.new(
            State.StartPos.X.Scale,
            State.StartPos.X.Offset + delta.X,
            State.StartPos.Y.Scale,
            State.StartPos.Y.Offset + delta.Y
        )
    end
end)

TitleBar.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        State.IsDragging = false
    end
end)

-- Bot√£o Minimizar
MinimizeBtn.MouseButton1Click:Connect(function()
    State.IsMinimized = true
    ContentContainer.Visible = false
    MainFrame.Size = UDim2.new(0, 350, 0, 45)
    ShowNotification("‚ûñ Janela minimizada", Config.UI.WarningColor)
end)

-- Bot√£o Maximizar
MaximizeBtn.MouseButton1Click:Connect(function()
    State.IsMinimized = false
    ContentContainer.Visible = true
    MainFrame.Size = UDim2.new(0, 350, 0, 450)
    ShowNotification("‚¨ú Janela maximizada", Config.UI.SuccessColor)
end)

-- Bot√£o Fechar
CloseBtn.MouseButton1Click:Connect(function()
    -- Desativar todas as fun√ß√µes antes de fechar
    if State.SpeedBoostActive then
        SpeedToggle.SetState(false)
    end
    if State.FakePingActive then
        FakePingToggle.SetState(false)
    end
    if State.HitboxActive then
        HitboxToggle.SetState(false)
    end
    
    ScreenGui:Destroy()
end)

-- Anima√ß√£o de entrada
MainFrame.Size = UDim2.new(0, 0, 0, 0)
MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)

TweenService:Create(MainFrame, TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
    Size = UDim2.new(0, 350, 0, 450),
    Position = UDim2.new(0.5, -175, 0.5, -225)
}):Play()

ShowNotification("üéÆ Branzz Hub PvP carregado com sucesso!", Config.UI.SuccessColor)

print("‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó")
print("‚ïë                    BRANZZ HUB PvP v1.1                       ‚ïë")
print("‚ïë                     Carregado com sucesso!                   ‚ïë")
print("‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù")
